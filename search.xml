<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>树莓派Ubuntu Server19.01</title>
      <link href="/2020/06/17/shu-mei-pai-ubuntu-server19-01/"/>
      <url>/2020/06/17/shu-mei-pai-ubuntu-server19-01/</url>
      
        <content type="html"><![CDATA[<p>1.连接wifi，在Ubuntu Server中使用netplan连接</p><pre><code># sudo vim /etc/netplan/50-cloud-init.yaml //末尾添加，注意缩进使用空格，wifis:前有缩进wifis:    wlan0:        dhcp4: true        access-points:            &quot;wlan-name&quot;:                password: &quot;password here&quot; # sudo netplan --debug apply</code></pre><p>2.树莓派换源</p><pre><code># sudo sed -i &#39;s/ports.ubuntu.com/mirrors.ustc.edu.cn/g&#39; /etc/apt/sources.list</code></pre><p>3.开启ssh</p><pre><code># sudo apt search openssh-server# sudo apt install opessh-client openssh-server# sudo dpkg-reconfigure openssh-server# sudo service ssh restart# sudo service ssh status# sudo systemctl enable ssh</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> 树莓派 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>服务器日志分析</title>
      <link href="/2020/05/22/fu-wu-qi-ri-zhi-fen-xi/"/>
      <url>/2020/05/22/fu-wu-qi-ri-zhi-fen-xi/</url>
      
        <content type="html"><![CDATA[<h2 id="Apache"><a href="#Apache" class="headerlink" title="Apache"></a>Apache</h2><h3 id="日志位置"><a href="#日志位置" class="headerlink" title="日志位置"></a>日志位置</h3><p>​    在linux系统中，apache也就是apache2，默认的位置是在/var/log/apache2目录下，错误日志为error.log，访问日志一般带有access.log。</p><h3 id="访问日志分析"><a href="#访问日志分析" class="headerlink" title="访问日志分析"></a>访问日志分析</h3><p>日志示例</p><pre class="line-numbers language-bash"><code class="language-bash">192.168.1.20 - - <span class="token punctuation">[</span>22/Apr/2020:15:27:49 +0800<span class="token punctuation">]</span> <span class="token string">"GET /1/index.php HTTP/1.1"</span> 404 490 <span class="token string">"-"</span> <span class="token string">"Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>依次各字段的含义为</p><pre class="line-numbers language-bash"><code class="language-bash">远端主机名+客户端日志名称（可空）+客户端用户名（可空）+服务器时间+请求内容（方法名、地址和http协议）+响应的http状态码的最终结果+服务器发送的字节数+来源页+客户端信息<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>​    apache的日志格式也可以去自定义，所在的配置文件在/etc/apache2/apache2.conf文件里的，可以使用vim打开，然后/Logformat进行查找，一般有下面五种格式，当然也可以根据自己的需要进行修改。</p><pre class="line-numbers language-bash"><code class="language-bash">LogFormat <span class="token string">"%v:%p %h %l %u %t \"%r\" %>s %O \"%{Referer}i\" \"%{User-Agent}i\""</span> vhost_combinedLogFormat <span class="token string">"%h %l %u %t \"%r\" %>s %O \"%{Referer}i\" \"%{User-Agent}i\""</span> combinedLogFormat <span class="token string">"%h %l %u %t \"%r\" %>s %O"</span> commonLogFormat <span class="token string">"%{Referer}i -> %U"</span> refererLogFormat <span class="token string">"%{User-agent}i"</span> agent<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>具体的参数说明请参考阿里云<a href="https://help.aliyun.com/document_detail/28987.html" target="_blank" rel="noopener">Apache 日志</a>文档，此次我的例子使用的是默认的combined格式。</p><p>window下日志的目录在apache安装目录的logs下。</p><h2 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h2><h3 id="日志位置-1"><a href="#日志位置-1" class="headerlink" title="日志位置"></a>日志位置</h3><p>​    Nginx的配置文件的路径是/etc/nginx/nginx.conf，在配置文件中搜索access_log可找到日志的默认路径，一般为/var/logs/nginx目录下，访问日志名称为access.log。</p><h3 id="访问日志分析-1"><a href="#访问日志分析-1" class="headerlink" title="访问日志分析"></a>访问日志分析</h3><p>日志示例</p><pre class="line-numbers language-bash"><code class="language-bash">192.168.1.220 - - <span class="token punctuation">[</span>10/Jul/2020:15:51:09 +0800<span class="token punctuation">]</span> <span class="token string">"GET /ubuntu.iso HTTP/1.0"</span> 0.000 129 404 168 <span class="token string">"-"</span> <span class="token string">"Wget/1.11.4 Red Hat modified"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>各字段的含义依次为：</p><pre class="line-numbers language-bash"><code class="language-bash">客户端ip地址 + - +客户端用户名称（可空）+通用日志格式下的本地时间 + 请求的URL和HTTP协议 + 请求处理时间 + 请求的长度 + 请求状态 + 发送给客户端的字节数（不包括响应头大小）+ 源页面 + 客户端信息<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>​    当然，nginx的日志格式也是可以进行定义的，也是在配置文件中进行配置，打开配置文件后搜索log_format就能找到日志格式的定义。例子中的格式如下：</p><pre class="line-numbers language-bash"><code class="language-bash">log_format main  <span class="token string">'<span class="token variable">$remote_addr</span> - <span class="token variable">$remote_user</span> [<span class="token variable">$time_local</span>] "<span class="token variable">$request</span>" '</span>                 <span class="token string">'<span class="token variable">$request_time</span> <span class="token variable">$request_length</span> '</span>                 <span class="token string">'<span class="token variable">$status</span> <span class="token variable">$body_bytes_sent</span> "<span class="token variable">$http_referer</span>" '</span>                 <span class="token string">'"<span class="token variable">$http_user_agent</span>"'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>参考自阿里云<a href="https://help.aliyun.com/document_detail/28988.html?spm=a2c4g.11186623.4.3.2073452aybxRHz#title-3sa-zvu-9z4" target="_blank" rel="noopener">Nginx日志</a>文档,其他字段的名称及含义也可以进行查询。</p><p>windows下Nginx日志默认在Nginx安装目录下的logs下。</p><h2 id="IIS"><a href="#IIS" class="headerlink" title="IIS"></a>IIS</h2><h3 id="日志位置-2"><a href="#日志位置-2" class="headerlink" title="日志位置"></a>日志位置</h3><p>​    IIS的日志位置与IIS的版本号的不同也有不同，相关配置文件的位置也有不同。</p><table><thead><tr><th>版本</th><th>日志位置</th><th>配置文件位置</th></tr></thead><tbody><tr><td>IIS6</td><td>C:\Windows\System32\LogFiles</td><td>C:\WINDOWS\system32\inetsrv\MetaBase.xml</td></tr><tr><td>IIS7</td><td>C:\inetpub\logs\LogFiles</td><td>C:\Windows\System32\inetsrv\config\applicationHost.config</td></tr></tbody></table><p>由于手头没有IIS服务器，所以无法进行验证，如有错误请联系修改。</p><h3 id="日志字段"><a href="#日志字段" class="headerlink" title="日志字段"></a>日志字段</h3><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#Software: Microsoft Internet Information Services 7.5</span><span class="token comment" spellcheck="true">#Version: 1.0</span><span class="token comment" spellcheck="true">#Date: 2013-08-21 01:00:00</span><span class="token comment" spellcheck="true">#Fields: date time s-sitename s-computername s-ip cs-method cs-uri-stem cs-uri-query s-port cs-username c-ip cs-version cs(User-Agent) cs(Cookie) cs(Referer) cs-host sc-status sc-substatus sc-win32-status sc-bytes cs-bytes time-taken</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>date：表示记录访问日期；<br>time：访问时间；<br>s-sitename：客户端所访问的该站点的 Internet 服务和实例的号码。<br>s-ip：服务器ip<br>cs-method：表示访问方法，常见的有两种，一是GET，就是平常我们打开一个URL访问的动作，二是POST，提交表单时的动作；<br>cs-uri-stem： 就是访问哪一个文件；<br>cs-uri-query：是指访问地址的附带参数，如asp文件?后面的字符串id=12等等，如果没有参数则用-表示；<br>s-port：访问的端口<br>cs-username：对于通过身份验证的用户，格式是“域\用户名”；对于匿名用户，是一个连字符 (-)。<br>c-ip：访问服务器的客户端 IP 地址。（已过滤掉中间各种IP，是真实的客户端IP）<br>cs(User-Agent)：在客户端使用的浏览器。<br>sc-status：状态，200表示成功，403表示没有权限，404表示打不到该页面，500表示程序有错；<br>sc-substatus：跟数据缓存有关<br>cs–win32-statu： 客户端传送到服务端的字节大小；<br>time-taken: 处理所用的时间 ，单位毫秒</p><p>注：IIS日志位置未进行验证，配置文件位置参考自阿里云<a href="https://help.aliyun.com/document_detail/137905.html?spm=a2c4g.11186623.6.610.206b319a0JVJsy" target="_blank" rel="noopener">IIS日志</a>文档。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2020/05/20/hello-world/"/>
      <url>/2020/05/20/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class="line-numbers language-bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class="line-numbers language-bash"><code class="language-bash">$ hexo server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class="line-numbers language-bash"><code class="language-bash">$ hexo generate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class="line-numbers language-bash"><code class="language-bash">$ hexo deploy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
